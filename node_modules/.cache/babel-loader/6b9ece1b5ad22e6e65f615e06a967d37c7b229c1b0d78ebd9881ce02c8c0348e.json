{"ast":null,"code":"var _jsxFileName = \"D:\\\\XAMPP\\\\htdocs\\\\mirea\\\\react_chat\\\\src\\\\components\\\\authorizations\\\\auth.jsx\",\n  _s = $RefreshSig$();\nimport './auth.css';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addUser, setCurrent } from \"../reduxComp/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet users = [];\nlet dispatch;\nfunction Auth() {\n  _s();\n  function storeUser() {\n    let login = document.getElementById(\"login\").value;\n    let password = document.getElementById(\"password\").value;\n    let role = document.getElementById(\"role\").checked === true ? \"admin\" : \"user\";\n    let rights = document.getElementById(\"rights\").value;\n    let user = {\n      login: login,\n      password: password,\n      role: role,\n      rights: rights\n    };\n    if (users.find(u => u.login === login)) {\n      if (users.find(u => u.login === login && u.password === password)) dispatch(setCurrent(user));else alert(\"User already exists\");\n    } else dispatch(addUser(user));\n  }\n  users = useSelector(state => state.user.users);\n  dispatch = useDispatch();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"authBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"login\",\n      placeholder: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"password\",\n      placeholder: \"Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"rights\",\n      placeholder: \"Rights\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"role\",\n      children: [\"Admin?\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"role\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"button\",\n      id: \"auth\",\n      value: \"Login/Register\",\n      onClick: storeUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this);\n}\n_s(Auth, \"8AvHZx39FerRi5hbYWqzZSJMEZE=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = Auth;\nexport default Auth;\nexport const isAuthenticated = user => !!user;\nexport const isAllowed = (user, rights) => rights.some(right => user.rights.includes(right));\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["useDispatch","useSelector","addUser","setCurrent","jsxDEV","_jsxDEV","users","dispatch","Auth","_s","storeUser","login","document","getElementById","value","password","role","checked","rights","user","find","u","alert","state","className","children","type","id","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onClick","_c","isAuthenticated","isAllowed","some","right","includes","$RefreshReg$"],"sources":["D:/XAMPP/htdocs/mirea/react_chat/src/components/authorizations/auth.jsx"],"sourcesContent":["import './auth.css';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {addUser, setCurrent} from \"../reduxComp/userSlice\";\r\n\r\nlet users = []\r\nlet dispatch;\r\n\r\nfunction Auth() {\r\n    function storeUser() {\r\n        let login = document.getElementById(\"login\").value\r\n        let password = document.getElementById(\"password\").value\r\n        let role = document.getElementById(\"role\").checked === true ? \"admin\" : \"user\"\r\n        let rights = document.getElementById(\"rights\").value\r\n        let user = {login: login, password: password, role: role, rights: rights}\r\n        if (users.find(u => u.login === login))\r\n            if (users.find(u => u.login === login && u.password === password))\r\n                dispatch(setCurrent(user))\r\n            else alert(\"User already exists\")\r\n        else\r\n            dispatch(addUser(user))\r\n    }\r\n    users = useSelector((state) => state.user.users)\r\n    dispatch = useDispatch()\r\n    return (\r\n        <div className={\"authBox\"}>\r\n            <input type=\"text\" id=\"login\" placeholder={\"Login\"}/>\r\n            <input type=\"text\" id=\"password\" placeholder={\"Password\"}/>\r\n            <input type=\"text\" id=\"rights\" placeholder={\"Rights\"}/>\r\n            <label htmlFor={\"role\"}>Admin?<input type=\"checkbox\" id=\"role\"/></label>\r\n            <input type=\"button\" id=\"auth\" value={\"Login/Register\"} onClick={storeUser}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Auth\r\n\r\nexport const isAuthenticated = user => !!user;\r\n\r\nexport const isAllowed = (user, rights) =>\r\n    rights.some(right => user.rights.includes(right));"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}